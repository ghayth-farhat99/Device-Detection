<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Delegate-CH" content="sec-ch-ua-full-version-list https://cloud.51degrees.com; sec-ch-ua-model https://cloud.51degrees.com; sec-ch-ua-platform https://cloud.51degrees.com; sec-ch-ua-platform-version https://cloud.51degrees.com"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/bienvenue/bienvenue_style.css">
    <title>Device Information</title>
    <style>
        body {
            font-family: 'dosis';
            margin: 0;
            min-height: 100vh;
            background-color: #B7D8E5; /* Added background color for better visibility */
        }

.content {
    width: 100%;
    height: 100%;
    position: fixed; /* Position content above the overlay */
    align-items: center;
}

.navbar{
    width: 100%;
    height: 10%;
    background-color: white;
    color: #434F54;
    display: flex;
    align-items: center; /* Center vertically */
    justify-content: center; /* Center horizontally */
}

.bienvenue_container{
    width: 100%;
}

.bienvenue {
color: #434F54;
font-size: 2em;
margin-top: 10%;
margin-right: 30%;
text-align: center;
text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
animation: fadeInDown 1s ease;
letter-spacing: 1.5px;
position: relative;
}

.first_message{
text-align: center;
color: #434F54;
font-size: 20px;
}

.spinner_container{
    display: flex;
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    margin-top: 20%;
}

.first_message_container{
    margin-top: 20%;
}

.second_message_container{
    margin: auto;
    margin-top: 40%;
    background-color: #FFF;
    border-radius: 5px;
    width: fit-content; 
}

.second_message{
font-size: 10px;
color: #434F54;
margin: 5px;
}
/* Keyframes for animations */
@keyframes fadeInDown {
from {
opacity: 0;
transform: translateY(-20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}


.loader{
display: block;
position: relative;
height: 10px;
width: 235px;
background-image: 
linear-gradient(#FFF 20px, transparent 0), 
linear-gradient(#FFF 20px, transparent 0), 
linear-gradient(#FFF 20px, transparent 0), 
linear-gradient(#FFF 20px, transparent 0), 
linear-gradient(#FFF 20px, transparent 0), 
linear-gradient(#FFF 20px, transparent 0);
background-repeat: no-repeat;
background-size: 35px auto; 
background-position: 0 0, 40px 0, 80px 0, 120px 0, 160px 0, 200px 0; 
animation: pgfill 1s linear infinite;
}

@keyframes pgfill {
0% {   
    background-image: 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
16% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
32% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
50% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
66% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
83% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0),
    linear-gradient(#434F54 35px, transparent 0),
    linear-gradient(#FFF 35px, transparent 0); 
}
100% {   
    background-image: 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0), 
    linear-gradient(#434F54 35px, transparent 0),
    linear-gradient(#434F54 35px, transparent 0),
    linear-gradient(#434F54 35px, transparent 0); 
}
}
    </style>
   
</head>
<body>
    <div class="content">
        <div class="navbar">
            <div>
                <!-- logo of the application will be here -->
            </div>
            <diV class="nomAppli">
                <h>nomAppli</h>
            </diV>
        </div>

        <div class="bienvenue_container">
            <h1 class="bienvenue">Bienvenue !</h1>
        </div>

        <div class="first_message_container">
            <p class="first_message">Merci de participer à <br/> l'expérimentation de nomAppli.</p>
        </div>
        
        <div class="spinner_container">
            <span class="loader"></span>
        </div>

        <div class="second_message_container">
            <p class="second_message">
                <b>Aucune donnée personnelle</b> n'est recueillie <br/> durant l'expérience qui vous est proposée.
            </p>
        </div>
    </div>
    <script async src="https://cloud.51degrees.com/api/v4/AQQp5zqSnQnjduyn3Eg.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            fod.complete(function (data) {
                // Fetch the properties from the JSON response.
                const deviceInfo = {
                    isMobile: data.device["ismobile"],
                    hardwareVendor: data.device["hardwarevendor"],
                    hardwareName: data.device["hardwarename"],
                    hardwareModel: data.device["hardwaremodel"],
                    fullscreen: data.device["fullscreen"],
                    screenPixelsWidth: data.device["screenpixelswidth"],
                    screenPixelsHeight: data.device["screenpixelsheight"],
                };

                // Set hardware name as title
                // const mobile_name = deviceInfo.hardwareName[0] || "User";
                // document.getElementById("hardwareNameTitle").innerText = `Welcome ${mobile_name}!`;


                // Send device info to server
                fetch('/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(deviceInfo)
                })
                .then(response => {
                    if (response.redirected) {
                        window.location.href = response.url; // Redirect to the new URL
                    } else {
                        return response.json(); // Handle JSON response if needed
                    }
                })
                .then(data => {
                    console.log('Success:', data);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
            });
        }
    </script>
    <!-- Inclure le fichier wakeLock.js -->
    <script src="../js/wakeLock.js"></script>
</body>
</html>
